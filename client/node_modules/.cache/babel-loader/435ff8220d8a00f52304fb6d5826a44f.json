{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\iaref\\\\Desktop\\\\FinalProject\\\\FinalProject\\\\client\\\\src\\\\auth\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useEffect, useState } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport api from './auth-request-api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nconsole.log(\"create AuthContext: \" + AuthContext); // THESE ARE ALL THE TYPES OF UPDATES TO OUR AUTH STATE THAT CAN BE PROCESSED\n\nexport const AuthActionType = {\n  GET_LOGGED_IN: \"GET_LOGGED_IN\",\n  LOGIN_USER: \"LOGIN_USER\",\n  LOGOUT_USER: \"LOGOUT_USER\",\n  REGISTER_USER: \"REGISTER_USER\"\n};\n\nfunction AuthContextProvider(props) {\n  _s();\n\n  const [auth, setAuth] = useState({\n    user: null,\n    loggedIn: false\n  });\n  const history = useHistory();\n  useEffect(() => {\n    auth.getLoggedIn();\n  }, []);\n\n  const authReducer = action => {\n    const {\n      type,\n      payload\n    } = action;\n\n    switch (type) {\n      case AuthActionType.GET_LOGGED_IN:\n        {\n          return setAuth({\n            user: payload.user,\n            loggedIn: payload.loggedIn\n          });\n        }\n\n      case AuthActionType.LOGIN_USER:\n        {\n          return setAuth({\n            user: payload.user,\n            loggedIn: true\n          });\n        }\n\n      case AuthActionType.LOGOUT_USER:\n        {\n          return setAuth({\n            user: null,\n            loggedIn: false\n          });\n        }\n\n      case AuthActionType.REGISTER_USER:\n        {\n          return setAuth({\n            user: payload.user,\n            loggedIn: true\n          });\n        }\n\n      default:\n        return auth;\n    }\n  };\n\n  auth.getLoggedIn = async function () {\n    const response = await api.getLoggedIn();\n\n    if (response.status === 200) {\n      authReducer({\n        type: AuthActionType.SET_LOGGED_IN,\n        payload: {\n          loggedIn: response.data.loggedIn,\n          user: response.data.user\n        }\n      });\n    }\n  };\n\n  auth.registerUser = async function (firstName, lastName, email, password, passwordVerify) {\n    const response = await api.registerUser(firstName, lastName, email, password, passwordVerify);\n\n    if (response.status === 200) {\n      authReducer({\n        type: AuthActionType.REGISTER_USER,\n        payload: {\n          user: response.data.user\n        }\n      });\n      history.push(\"/login\");\n    }\n  };\n\n  auth.loginUser = async function (email, password) {\n    const response = await api.loginUser(email, password);\n\n    if (response.status === 200) {\n      authReducer({\n        type: AuthActionType.LOGIN_USER,\n        payload: {\n          user: response.data.user\n        }\n      });\n      history.push(\"/\");\n    }\n  };\n\n  auth.logoutUser = async function () {\n    const response = await api.logoutUser();\n\n    if (response.status === 200) {\n      authReducer({\n        type: AuthActionType.LOGOUT_USER,\n        payload: null\n      });\n      history.push(\"/\");\n    }\n  };\n\n  auth.getUserInitials = function () {\n    let initials = \"\";\n\n    if (auth.user) {\n      initials += auth.user.firstName.charAt(0);\n      initials += auth.user.lastName.charAt(0);\n    }\n\n    console.log(\"user initials: \" + initials);\n    return initials;\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      auth\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AuthContextProvider, \"NFINwiyv/qU4uWyw/gIk49CAqBM=\", false, function () {\n  return [useHistory];\n});\n\n_c = AuthContextProvider;\nexport default AuthContext;\nexport { AuthContextProvider };\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"sources":["C:/Users/iaref/Desktop/FinalProject/FinalProject/client/src/auth/index.js"],"names":["React","createContext","useEffect","useState","useHistory","api","AuthContext","console","log","AuthActionType","GET_LOGGED_IN","LOGIN_USER","LOGOUT_USER","REGISTER_USER","AuthContextProvider","props","auth","setAuth","user","loggedIn","history","getLoggedIn","authReducer","action","type","payload","response","status","SET_LOGGED_IN","data","registerUser","firstName","lastName","email","password","passwordVerify","push","loginUser","logoutUser","getUserInitials","initials","charAt","children"],"mappings":"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","sourcesContent":["import React, { createContext, useEffect, useState } from \"react\";\r\nimport { useHistory } from 'react-router-dom'\r\nimport api from './auth-request-api'\r\n\r\nconst AuthContext = createContext();\r\nconsole.log(\"create AuthContext: \" + AuthContext);\r\n\r\n// THESE ARE ALL THE TYPES OF UPDATES TO OUR AUTH STATE THAT CAN BE PROCESSED\r\nexport const AuthActionType = {\r\n    GET_LOGGED_IN: \"GET_LOGGED_IN\",\r\n    LOGIN_USER: \"LOGIN_USER\",\r\n    LOGOUT_USER: \"LOGOUT_USER\",\r\n    REGISTER_USER: \"REGISTER_USER\"\r\n}\r\n\r\nfunction AuthContextProvider(props) {\r\n    const [auth, setAuth] = useState({\r\n        user: null,\r\n        loggedIn: false\r\n    });\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        auth.getLoggedIn();\r\n    }, []);\r\n\r\n    const authReducer = (action) => {\r\n        const { type, payload } = action;\r\n        switch (type) {\r\n            case AuthActionType.GET_LOGGED_IN: {\r\n                return setAuth({\r\n                    user: payload.user,\r\n                    loggedIn: payload.loggedIn\r\n                });\r\n            }\r\n            case AuthActionType.LOGIN_USER: {\r\n                return setAuth({\r\n                    user: payload.user,\r\n                    loggedIn: true\r\n                })\r\n            }\r\n            case AuthActionType.LOGOUT_USER: {\r\n                return setAuth({\r\n                    user: null,\r\n                    loggedIn: false\r\n                })\r\n            }\r\n            case AuthActionType.REGISTER_USER: {\r\n                return setAuth({\r\n                    user: payload.user,\r\n                    loggedIn: true\r\n                })\r\n            }\r\n            default:\r\n                return auth;\r\n        }\r\n    }\r\n\r\n    auth.getLoggedIn = async function () {\r\n        const response = await api.getLoggedIn();\r\n        if (response.status === 200) {\r\n            authReducer({\r\n                type: AuthActionType.SET_LOGGED_IN,\r\n                payload: {\r\n                    loggedIn: response.data.loggedIn,\r\n                    user: response.data.user\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    auth.registerUser = async function(firstName, lastName, email, password, passwordVerify) {\r\n        const response = await api.registerUser(firstName, lastName, email, password, passwordVerify);      \r\n        if (response.status === 200) {\r\n            authReducer({\r\n                type: AuthActionType.REGISTER_USER,\r\n                payload: {\r\n                    user: response.data.user\r\n                }\r\n            })\r\n            history.push(\"/login\");\r\n        }\r\n    }\r\n\r\n    auth.loginUser = async function(email, password) {\r\n        const response = await api.loginUser(email, password);\r\n        if (response.status === 200) {\r\n            authReducer({\r\n                type: AuthActionType.LOGIN_USER,\r\n                payload: {\r\n                    user: response.data.user\r\n                }\r\n            })\r\n            history.push(\"/\");\r\n        }\r\n    }\r\n\r\n    auth.logoutUser = async function() {\r\n        const response = await api.logoutUser();\r\n        if (response.status === 200) {\r\n            authReducer( {\r\n                type: AuthActionType.LOGOUT_USER,\r\n                payload: null\r\n            })\r\n            history.push(\"/\");\r\n        }\r\n    }\r\n\r\n    auth.getUserInitials = function() {\r\n        let initials = \"\";\r\n        if (auth.user) {\r\n            initials += auth.user.firstName.charAt(0);\r\n            initials += auth.user.lastName.charAt(0);\r\n        }\r\n        console.log(\"user initials: \" + initials);\r\n        return initials;\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider value={{\r\n            auth\r\n        }}>\r\n            {props.children}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n\r\nexport default AuthContext;\r\nexport { AuthContextProvider };"]},"metadata":{},"sourceType":"module"}